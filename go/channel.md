# 通道

    Don’t communicate by sharing memory; share memory by communicating. （不要通过共享内存来通信，而应该通过通信来共享内存。）

Go 语言的主要创造者之一的 Rob Pike 的至理名言，体现了 Go 语言最重要的编程理念。

通道类型的值本身就是并发安全的。

在初始化通道的时候，make 函数除了必须接收这样的类型字面量作为参数，还可以接收一个 int 类型的参数。

后者是可选的，用于表示该通道的容量。所谓通道的容量，就是指通道最多可以缓存多少个元素值，它是不能小于 0 的。

- 当容量为 0 时，为非缓冲通道，是不带缓冲的通道。
- 当容量大于 0 时，为缓冲通道，是带有缓冲的通道。

非缓冲通道和缓冲通道有着不同的数据传递方式。

一个通道相当于一个先进先出（FIFO）的队列。

## [单向通道](https://time.geekbang.org/column/article/14664)

只能发不能收，或者只能收不能发的通道。

主要的用途就是约束其他代码的行为。

在调用函数的单通道参数时候，只需要把一个元素类型匹配的双向通道传给它，o 语言在这种情况下会自动地把双向通道转换为函数所需的单向通道。

## select

select 语句只能与通道联用，它一般由若干个分支组成。每次执行这种语句的时候，一般只有一个分支中的代码会被运行。

select 语句的分支分为两种，一种叫做候选分支，另一种叫做默认分支。候选分支总是以关键字 case 开头，后跟一个 case 表达式和一个冒号，然后我们可以从下一行开始写入当分支被选中时需要执行的语句。

默认分支其实就是 default case，因为，当且仅当没有候选分支被选中时它才会被执行，所以它以关键字 default 开头并直接后跟一个冒号。同样的，我们可以在 default:的下一行写入要执行的语句。

由于 select 语句是专为通道而设计的，所以每个 case 表达式中都只能包含操作通道的表达式，比如接收表达式。
