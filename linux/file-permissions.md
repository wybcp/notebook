# linux file 权限

在 Linux 里面，任何一个文件都具有“User, Group 及 Others”三种身份的个别权限。

在我们 Linux 系统当中，默认的情况下，所有的系统上的帐号与一般身份使用者：

- root 的相关信息记录在`/etc/passwd`
- 个人的密码记录在`/etc/shadow`，
- Linux 所有的群组名称纪录在`/etc/group`

## Linux 文件属性

`drwxr-xr-x 13 root root 4096 Oct 26 2016 var/`

### 第一栏

代表这个文件的类型与权限（permission）：共有十个字符

#### 第一个字符

代表这个文件是“目录、文件或链接文件等等”：

- 当为[ d ]则是目录；
- 当为[ - ]则是文件；
- 若是[ l ]则表示为链接文件（link file）；
- 若是[ b ]则表示为设备文件里面的可供储存的周边设备（可随机存取设备）；
- 若是[ c ]则表示为设备文件里面的序列埠设备，例如键盘、鼠标（一次性读取设备）。

#### 接下来的字符

以三个为一组，且均为“rwx” 的三个参数的组合。其中，[ r ]代表可读（read）、[ w ]代表可写（write）、[ x ]代表可执行（execute）。如果没有权限，就会出现减号[ - ]而已。

- 第一组为“文件拥有者可具备的权限”
- 第二组为“加入此群组之帐号的权限”；
- 第三组为“非本人且没有加入本群组之其他帐号的权限”。

### 第二栏

表示有多少文件名链接到此节点（i-node）：

每个文件都会将他的权限与属性记录到文件系统的 i-node 中，不过，我们使用的目录树却是使用文件名来记录，因此每个文件名就会链接到一个 i-node！这个属性记录的，就是有多少不同的文件名链接到相同的一个 i-node 号码去就是了。

### 第三栏

表示拥有者帐号

### 第四栏

表示这个文件的所属群组

### 第五栏

为这个文件的容量大小，默认单位为 Bytes；

### 第六栏

为这个文件的创建日期或者是最近的修改日期，`--full-time`参数显示完整时间`2016-10-26 14:55:30.504000000 +0800`；

### 第七栏

文件的文件名

## 修改文件属性与权限

- chgrp ：改变文件所属群组 change group，群组必须先存在于`/etc/group`

  ```shell
  chgrp [-R] dirname/filename ...
  ```

  选项与参数：
  -R : 进行递回（recursive）的持续变更，亦即连同次目录下的所有文件、目录都更新成为这个群组之意。常常用在变更某一目录内所有的文件之情况。

  ```shell
  chgrp users initial-setup-ks.cfg
  ```

- chown ：改变文件拥有者 change owner，`/etc/passwd`文件中有使用者名称

  ```shell
  chown [-R] 帐号名称 文件或目录
  chown [-R] 帐号名称:群组名称 文件或目录
  ```

- chmod ：改变文件的权限, SUID, SGID, SBIT 等等的特性

### 数字类型改变文件权限

各权限的分数对照表如下：

- r:4
- w:2
- x:1

每种身份（owner/group/others）各自的三个权限（r/w/x）分数是需要累加的

例如当权限为： [-rwxrwx---] 分数则是：

    > owner = rwx = 4+2+1 = 7
    > group = rwx = 4+2+1 = 7
    > others= --- = 0+0+0 = 0

该文件的权限数字就是 770！

变更权限的指令 chmod 的语法是这样的：

```shell
chmod [-R] xyz 文件或目录
选项与参数：
xyz : 就是刚刚提到的数字类型的权限属性，为 rwx 属性数值的相加。
```

### 符号类型改变文件权限

由 u, g, o 来代表三种身份的权限！此外， a 则代表 all 亦即全部的身份！那么读写的权限就可以写成 r, w, x
语法：

```shell
chmod | u g o a | +（加入） -（除去） =（设置） | r w x | 文件或目录
```

例子：

```shell
chmod  u=rwx,go=rx  .bashrc
# 注意喔！那个 u=rwx,go=rx 是连在一起的，中间并没有任何空白字符！
```
