# 语句

## 最好不用@

用`@`掩盖错误会降低脚本运行速度，并且在后台有很多额外操作。

用`@`比起不用，效率差距 3 倍。特别不要在循环中使用`@`。

## 避免使用魔术方法

对于`__`开头的函数就命名为魔术函数，它们都在特定的条件下触发。

这些魔术函数包括：`__construct()`、`__get()`、`__call()`、`__autoload()`等等。

以`__autoload()` 为例，如果不能将类名与实际的磁盘文件对应起来，将不得不做大量的文件存在判断。

而判断文件存在需要磁盘 I/O 操作，众所周知，磁盘 I/O 操作的效率很低，因此这才是使得`autoload`机制效率降低的原因。

因此，在系统设计时，需要定义一套清晰的、将类名与实际磁盘文件映射的机制。

这个规则越简单越明确，`__autoload()`机制的效率就越高。

`autoload`机制并不是天然的效率低下，只有滥用`autoload`、设计不好的自动装载函数，才会导致其效率的降低.

所以说，尽量避免使用`__autoload`等魔术方法，有待商榷。

## 别在循环里用函数

例如：

```php
for($x=0; $x < count($array); $x++) {
}
```

这种写法在每次循环的时候都会调用 `count()` 函数，效率大大降低，建议这样：

```php
$len = count($array);
for($x=0; $x < $len; $x++) {
}
```

让函数在循环外面一次获得循环次数。

## 使用三元运算符

在简单的判断语句中，三元运算符`?:`更简洁高效。

## 使用选择分支语句

`switch`、`case`好于使用多个`if`、`else if`语句，并且代码更加容易阅读和维护。

## 屏蔽敏感信息

使用 [error_reporting()](http://php.net/manual/zh/function.error-reporting.php) 函数来预防潜在的敏感信息显示给用户。

理想的错误报告应该被完全禁用在 php.ini 文件里。

如果用的是共享虚拟主机，php.ini 不能修改，最好添加 [error_reporting()](http://php.net/manual/zh/function.error-reporting.php) 函数。

放在每个脚本文件的第一行，或者用`require_once()`来加载，能有效的保护敏感的 SQL 查询和路径，在出错时不被显示。

## 不标签 `<?`

不要使用开始标志的缩写形式，你正在使用这样的符号吗`<?`，应该用完整的`<?php`开始标签。

当然，如果是输出变量，用`<?= $value ?>`这种方式是鼓励的，可以是代码更加简洁。

## 纯 PHP 代码不加结束标记

如果文件内容是纯 PHP 代码，最好在文件末尾删除 PHP 结束标记`?>`。

这可以避免在 PHP 结束标记之后万一意外加入了空格或者换行符，会导致 PHP 开始输出这些空白，而脚本中此时并无输出的意图。

## 永远不要使用 register_globals 和 magic quotes

这是两个很古老的功能，在当时（十年前）也许是一个好方法，但现在看来并非如此。

老版本的 PHP 在安装时会默认打开这两个功能，这会引起安全漏洞、编程错误及其他的问题。

如只有用户输入了数据时才会创建变量等。

PHP5.4.0 开始这两个功能都被舍弃了，所以每个程序员都应该避免使用。

如果你过去的程序有使用这两项功能，那就尽快将其剔除吧。
