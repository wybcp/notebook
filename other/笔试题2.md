# 一、计算机网络

**基础部分**

1. TCP 报头格式

   ![TCP](http://img.blog.csdn.net/20170227111849763?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWFyeTE5OTIwNDEw/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)

   端口号用来标识不同的应用程序。

   - **源端口**：标识来源应用程序的
   - **目标端口**：标识接收的计算机的应用程序
   - **保留**：为将来定义新的用途保留，现在一般置 0。
   - ：是本报文段发送的数据组的第一个字节的序号 。每个字节一个序号。比如一个报文段是 300.数据大小是 100 字节。那么下一个报文的序号就是 400.所以序号确保了 TCP 传输的有序性
   - **ack 确认号**：指明下一个期待收到的字节序号，表明该序号之前的所有数据已经正确无误的收到。确认号只有当 ACK 标志为 1 时才有效
   - **数据偏移／首部长度**：4bits。由于首部可能含有可选项内容，因此 TCP 报头的长度是不确定的，报头不包含任何任选字段则长度为 20 字节，4 位首部长度字段所能表示的最大值为 1111，转化为 10 进制为 15，15\*32/8 = 60，故报头最大长度为 60 字节。首部长度也叫数据偏移，是因为首部长度实际上指示了数据区在报文段中的起始偏移值。
   - **保留**：为将来定义新的用途保留，现在一般置 0。
   - **控制位**：URG  ACK  PSH  RST  SYN  FIN，共 6 个，每一个标志位表示一个控制功能。

     - ACK 确认序号

     - SYN 同步序号。握手的时候用

     - FIN 关闭连接

   - **窗口**：滑动窗口大小，用来告知发送端接受端的缓存大小，以此控制发送端发送数据的速率，从而达到流量控制。窗口大小时一个 16bit 字段，因而窗口大小最大为 65535。
   - **校验和**：奇偶校验，此校验和是对整个的  TCP  报文段，包括  TCP  头部和  TCP  数据，以  16  位字进行计算所得。由发送端计算和存储，并由接收端进行验证。
   - **紧急指针**：只有当  URG  标志置  1  时紧急指针才有效。紧急指针是一个正的偏移量，和顺序号字段中的值相加表示紧急数据最后一个字节的序号。 TCP  的紧急方式是发送端向另一端发送紧急数据的一种方式。
   - **选项和填充**：最常见的可选字段是最长报文大小，又称为 MSS（Maximum Segment Size），每个连接方通常都在通信的第一个报文段（为建立连接而设置 SYN 标志为 1 的那个段）中指明这个选项
   - **数据部分**： TCP  报文段中的数据部分是可选的。在一个连接建立和一个连接终止时，双方交换的报文段仅有  TCP  首部

   TCP 报头中的源端口号和目的端口号同 IP 数据报中的源 IP 与目的 IP 唯一确定一条 TCP 连接。

2. UDP 报头格式

   ![udp-1](https://github.com/xianyunyh/tcp-ip-protocal/raw/master/udp-1.png)

   - 1、源端口号，16bit
   - 2、目的端口号：数据接收者的端口号，16bit
   - 3、UDP 长度：UDP 长度字段指的是 UDP 首部和 UDP 数据的字节长度。该字段的最小值为 8 字节
   - 4、UPD 校验和：UDP 检验和覆盖 UDP 首部和 UDP 数据
   - 5、首部长度：首部中 32bit 字的数目，可表示 15\*32bit=60 字节的首部。一般首部长度为 20 字节。
   - 6、数据

3. TCP/UDP 区别（不仅是宏观上的，最好能根据各自的机制讲解清楚）

   TCP 存在三次握手。能进行流量控制，保证数据的完整。

   UDP 不存在握手。会导致丢包。传输比较快。

4. HTTP 状态码（最好结合使用场景，比如在缓存命中时使用哪个）

   2xx 标识正常

   3xx 标识重定向 比如 301 永久重定向 304 标识使用缓存

   4xx 标识资源未找到 404 文件没找到 403 禁止访问

   5xx 服务器内部错误

8) TCP 三次握手、四次挥手（这个问题真的要回答吐了，不过真的是面试官最喜欢问的，建议每天手撸一遍，而且不只是每次请求的过程，各种 FIN_WAIT、TIME_WAIT 状态也要掌握）。

   [TCP 详解](https://github.com/xianyunyh/tcp-ip-protocal)

   **三次握手**

   - 客户端将标志位置 SYN 置 1，发送序号为 K 的数据。客户端进入 SYN_SEND 状态
   - 服务端收到数据包后，先确认这个数据[ack=K+1],将自己的标志位 SYN 置 1，发送序号为 M 的数据。服务端进入 SYN_RECV
   - 客户端收到后。将自己标志位置 SYN 置 1.确认序号为 M 的数据。[ack=M+1]. ESTABLISHED

   **四次挥手**

   - 客户端发送将自己的标识 FIN 置 1.发送序号为 M 的数据包 客户端进入 FIN_WAIT_1
   - 服务器收到 M，先确认 ack=M+1。发送 ack
   - 服务器再发送 FIN,序号为 N 的数据包 进入 LAST_ACK
   - 客户端收到后，进入 TIME_WAIT,再发送 ACK=1.ack=N+1 的数据包 服务端进入 CLOSED

9) 打开网页到页面显示之间的过（涵盖了各个方面，DNS 解析过程，Nginx 请求转发、连接建立和保持过程、浏览器内容渲染过程，考虑的越详细越好）。
10) http 和 https 区别，https 在请求时额外的过程，https 是如何保证数据安全的
11) IP 地址子网划分
12) POST 和 GET 区别
13) DNS 解析过程

**深入部分**

13. TCP 如何保证数据的可靠传输的（这个问题可以引申出很多子问题，拥塞控制慢开始、拥塞避免、快重传、滑动窗口协议、停止等待协议、超时重传机制，最好都能掌握）

8) 聚集索引和非聚集索引区别。

   [聚集索引和非聚集索引区别](https://blog.csdn.net/zc474235918/article/details/50580639)

9) 有哪些锁（乐观锁悲观锁），select 时怎么加排它锁

   select \* from for update; 排它锁

   select \* from user lock in share mode 共享锁

   [mysql 共享锁与排他锁](http://www.cnblogs.com/boblogsbo/p/5602122.html)
