## PHP

1. 写一段代码保证多个进程同时写入成功

```php
#加锁
function write($filepath,$data) {
     $fp = fopen( $filepath, 'a' );   //以追加的方式打开文件，返回的是指针
 do{
 　　 usleep( 100 ); 　　　　　　//暂停执行程序，参数是以微秒为单位的
 }while( !flock( $fp, LOCK_EX ) );　　//以独享写入的方式锁定文件，成功则返回TRUE，否则FALSE
}
 $res = fwrite( $fp, $data."/n" );　　// 以追加的方式写入数据到打开的文件
 flock( $fp, LOCK_UN );　　　　　　//解锁，以让别的进程进行锁定
 fcloce( $fp );　　　　　　　　　　　//关闭打开的文件指针
 return $res;　　　　　　　　　　　　//返回写入结果
}
```

[https://www.cnblogs.com/gengyi/p/6399206.html](https://www.cnblogs.com/gengyi/p/6399206.html)

2. 打出前一天的时间

```php
date('Y-m-d H:i:s', strtotime('-1 day'))
```

3. echo、print、print_r 的 区别

echo 是一个语法结构。用于输出基本变量信息。print 是一个函数。有返回值。print_r 是一个函数。一般用来打印复合类型信息。

4. 翻转字符【包含中文】

```php
 function strRev($str,$encoding='utf-8'){
        $result = '';
        $len = mb_strlen($str);
        for($i=$len-1; $i>=0; $i--){
            $result .= mb_substr($str,$i,1,$encoding);
        }
        return $result;
    }
```

5. 遍历一个文件夹下的所有文件和子文件

```php
function my_dir($dir) {
    $files = array();
    if(@$handle = opendir($dir)) { //注意这里要加一个@，不然会有warning错误提示：）
        while(($file = readdir($handle)) != = false) {
            if($file != ".." && $file != ".") { //排除根目录；
                if(is_dir($dir."/".$file)) { //如果是子文件夹，就进行递归
                    $files[$file] = my_dir($dir."/".$file);
                } else { //不然就将文件的名字存入数组；
                    $files[] = $file;
                }

            }
        }
        closedir($handle);
        return $files;
    }
}
```

6. 不适用第三个变量交换两个变量的值

```php
function swap (int &$a, int &$b){
     // 20 10
    $a = $a+$b; // 30
    $b = $a-$b; //20 a
    $a = $a-$b;
}
```

## Linux

linux 计划任务

在每天凌晨 1 点运行 a.sh 文件

0 1 \* \* \* sh a.sh

每隔五分钟运行一次

5/\* \* \* \* \* sh a.sh

每周一当前 13：00 每隔五分钟运行一次

5/_ 13 _ \* 1 sh a.sh

每月的 1 号和 15 号每隔两个小时执行一次

`* */2 1,15 * sh a.sh`

## mysql

1. **Myisam 和 innodb 的差别**

存储结构。myisam 一个表，三个文件。结构、数据、索引

innodb 两个文件。索引、数据保持在一个文件。

innodb 支持事务、myiam 不支持

innodb 支持外键、支持行锁

## 算法

- 约瑟夫环

```php
function yuesefu($n,$m) {
    $r=0;
    for($i=2; $i<=$n; $i++) {
        $r=($r+$m)%$i;
    }
    return $r+1;
}
```

- 二分查找【如何在有序的数组中找到一个数的位置】

```php
/**
 * 二分查找
 * @param  array $array 数组
 * @param  int $n 数组数量
 * @param  int $value 要寻找的值
 * @return int
 */
function binary_search($array, $n, $value)
{
    $left = 0;
    $right = $n - 1;

    while ($left <= $right) {
        $mid = intval(($left + $right) / 2);
        if ($value > $array[$mid]) {
            $right = $mid + 1;
        } elseif ($value < $array[$mid]) {
            $left = $mid - 1;
        } else {
            return $mid;
        }
    }

    return -1;
}
```
